<html>
<head>
  <style type="text/css">
    body {
      padding: 0;
      margin: 0;
      font: bold 11px/14px "Helvetica Neue", Helvetica, Arial, sans-serif;
      text-rendering: optimizeLegibility;
      overflow: hidden;
    }
    .patreon-btn {
      height: 20px;
      overflow: hidden;
      white-space: nowrap;
    }
    .p-ico {
      float: left;
    }
    .p-btn,
    .p-count {
      border-radius: 3px;
      color: #555;
      cursor: pointer;
      display: inline-block;
      padding: 2px 5px 2px 4px;
      text-decoration: none;
      text-shadow: 0 1px 0 #fff;
      white-space: nowrap;
    }
    .p-btn {
      background-color: #e6e6e6;
      background-image: -moz-linear-gradient(top, #fafafa, #eaeaea);
      background-image: -ms-linear-gradient(#fafafa, #eaeaea);
      background-image: -o-linear-gradient(#fafafa, #eaeaea);
      background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#fafafa), to(#eaeaea));
      background-image: -webkit-linear-gradient(#fafafa, #eaeaea);
      background-image: linear-gradient(#fafafa, #eaeaea);
      background-repeat: no-repeat;
      border-bottom-color: #bcbcbc;
      border: 1px solid #d4d4d4;
    }
    .p-btn:hover,
    .p-btn:focus,
    .p-btn:active {
      color: #fff;
      text-decoration: none;
      text-shadow: 0 -1px 0 rgba(0,0,0,.25);
      border-color: #518cc6 #518cc6 #2a65a0;
      background-color: #3072b3;
    }
    .p-btn:hover,
    .p-btn:focus {
      background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#599bdc), to(#3072b3));
      background-image: -webkit-linear-gradient(#599bdc, #3072b3);
      background-image: -moz-linear-gradient(top, #599bdc, #3072b3);
      background-image: -ms-linear-gradient(#599bdc, #3072b3);
      background-image: -o-linear-gradient(#599bdc, #3072b3);
      background-image: linear-gradient(#599bdc, #3072b3);
    }
    .p-btn:active {
      background-image: none;
      -webkit-box-shadow: inset 0 2px 5px rgba(0,0,0,.10);
         -moz-box-shadow: inset 0 2px 5px rgba(0,0,0,.10);
              box-shadow: inset 0 2px 5px rgba(0,0,0,.10);
    }
    .p-ico {
      width: 15px;
      height: 15px;
      margin-top: -1px;
      margin-right: 4px;
      vertical-align: middle;
      background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAABWEAQAAADAfikSAAAFhElEQVRo3t1ZT2hURxh/HgSxtp720kYoFAPFipfm6GJbzaVEjEopvfXabhHFUgLWU+lBlFKoUSiI2Ao9qPQkaGmg9FIINpRaqEJAE0Qqu4sm3c3GPDKd3+z7Zr+ZN++9efumIB4mk/n7e9//b76NomjTkeJWr0dRoxFFc2PRG+IT1asx5n3OZy7UalF0YjKK/vxQXZzVsK72YX8pkPf/LrzcCYZzXiCnF+wLdny1dvTj0Wbz64fN6StXOh30GGM+DSbP54OYAG9uevLttavt9urep/+sn1zZJZbE99QwxjzWsS8fiLOIbWx8tHwMl/CLsxr2gTITiLNOC/nBSQ7g+vJHjzqdh7vivehd6wYQ7tPKoP5I7WAs4hTg8MzuOB4fb5+vbVk78OL1eKH2ZHkZ49nZdpuD4ZzBOqV1GmSgSeAxB7h0odncMLvyuUujMI91DoTzpsYpEGlQTIs4FaAgC4ADzb21dINTs/3V7rsDIBgsLDeZAE/pq9CDJT42MnnQZBtkOgCBZ2Csgv7TRggXMvABwT7sp7O4ZwACF8Q2w9BoI7QIQvYBeeHX7h/YT2chJ1PLAoDkUzKzOwgIlwn6tEwqgoBVxdpVAQQAKTu51uul7cQD5L1by8c++KLZhKXjYsgAY1BgW/zO4/9+mbZ4D5BTv/V9VZ7vAgCATSrId3mCFHlhAyDlhUtQ4oonOGOwyGBTCZCXX4+3UWSEoCkyjo4yZ5gJ4AlSPcZngCwutlpFHrhEtgLf0m8c5O5dyYod8/N8fdDgKoLkXSHbswIiRL0uRKMhxNyUUmXZ98cV2SVErSbEiUlxe37ethFuK1hX+0TJNFWsH7qpDnvkXLphvzznBSLWTy/YXwtHCAOE6yBnibHtIFVbL0hTbQDKt/JSIqzzeOIG4ixiG+GvvIwxiSs8CVHUGawjIc+03uYAWZdRTHGtcyB1n2BpqtKOZBGk2xRQdn9v8+p3iCXoMR4bMx2knejh3gFIokkgs16/f58fhJCzsntXHIGMtDLchluSIDAomrSpsJPvLCAeTzg1fcOVBqss15UvWcl3XjOSbDuSyvsjbnScdDsrzGuQEVcGBLQByNxUxNlx4PBAqxANl7bGP/qAqLxZah2XI9eyICD5lMjYEwKkUCZVQby0qwoI1m072fdO/ErKTnxALl9+/BipELd4jO18y06+tcX7gBzpdTaW9l0qmCW+ywfks6nup5W8cBUQCHnfL50fUvFEWFmkD8idOysrlJpC0JSyIjdLxXzhSFND2ElhjM8CGRlptYo8sHe2oiJY0sBfDqIuYOu6SVcRJO96XtLUiYkoOnu2/zSQvRoHA8EjJinLJnZg1kiGBdP/9AtreF2honDj0No3MDL0GOtXl/O55gUivzCpd/21uPaSS10BqCsNpSlKKnf4UgKAheProdLoMcY81lV5SlcavEH6VOAyumhkW/ci91EYE5Auzng/5RRIX4vA+1TVzSrhYh37sovMWc0KmYhsLhDMGwmgeqCWBCF5cNcSnJI8kOoysUEkW6DKCLm2doFVyl5Ka5cFUq/HMfE/nJ04KHnt99X9YS3eAeKuoVTyXVIV97TOEYh6PRl1FGhRUC/8vAUtISYmhJjeoxIJ2WMcDMQudxjVBpWVVAxa9MzG1+N9AS1DQo0eY50eiSGDlmKPbXCOnwF1QBNDBC2wAtkiAcAYz5zp9WCIoAJjzGNdZZX07vBtRAWVOnAh3h/cpcB3EZB+qokSDlJpT+KzcAkocMV4zPO44i45ZTT6NZR+YqUIaTeKI9intA5P59AgxM7/jRLIhJKLoWRig/x0ofszVBWXkXYRwNDaZYOgJKjjeCg7cVEC9gS1+DyZGL5LFZyH9F30eiJrpx/59asKFdaKXvg/fCEqSRsJ4AgAAAAASUVORK5CYII=);
      background-repeat: no-repeat;
      background-position: 0 -71px;
    }
    .p-btn:hover .p-ico,
    .p-btn:focus .p-ico,
    .p-btn:active .p-ico {
      background-position: 0 -54px;
    }
    .p-count {
      position: relative;
      display: none; /* hidden to start */
      margin-left: 4px;
      background-color: #fafafa;
      border: 1px solid #d4d4d4;
    }
    .p-count:hover,
    .p-count:focus {
      color: #4183C4;
    }
    .p-count:before,
    .p-count:after {
      content: ' ';
      position: absolute;
      display: inline-block;
      width: 0;
      height: 0;
      border-color: transparent;
      border-style: solid;
    }
    .p-count:before {
      top: 50%;
      left: -3px;
      margin-top: -4px;
      border-width: 4px 4px 4px 0;
      border-right-color: #fafafa;
    }
    .p-count:after {
      top: 50%;
      left: -4px;
      z-index: -1;
      margin-top: -5px;
      border-width: 5px 5px 5px 0;
      border-right-color: #d4d4d4;
    }
    .patreon-btn-large {
      height: 30px;
    }
    .patreon-btn-large .p-btn,
    .patreon-btn-large .p-count {
      padding: 2px 10px 2px 8px;
      font-size: 16px;
      line-height: 24px;
      border-radius: 4px;
    }
    .patreon-btn-large .p-ico {
      width: 25px;
      height: 25px;
      background-position: 0 -27px;
    }
    .patreon-btn-large .p-btn:hover .p-ico,
    .patreon-btn-large .p-btn:focus .p-ico,
    .patreon-btn-large .p-btn:active .p-ico {
      background-position: 0 0;
    }
    .patreon-btn-large .p-count {
      margin-left: 6px;
    }
    .patreon-btn-large .p-count:before {
      left: -5px;
      margin-top: -6px;
      border-width: 6px 6px 6px 0;
    }
    .patreon-btn-large .p-count:after {
      left: -6px;
      margin-top: -7px;
      border-width: 7px 7px 7px 0;
    }
  </style>
</head>

<body>
  <span class="patreon-btn" id="patreon-btn">
    <a class="p-btn" id="p-btn" href="#" target="_blank">
      <span class="p-ico"></span>
      <span class="p-text" id="p-text">Patreon</span>
    </a>
    <a class="p-count" id="p-count" href="#" target="_blank"></a>
  </span>

  <script type="text/javascript">
    // Function to parse the document location's query parameters and return
    // them as object.
    function getParamsFromUrl() {
      var vars = {},
        hash,
        query = window.location.search.slice( 1 ),
        hashes = query.split('&');

      for ( var i = 0; i < hashes.length; i++ ) {
        hash = hashes[i].split('=');
        vars[ hash[0] ] = hash[1];
      }

      return vars;
    }


    // Function to fetch the numbers from Patreon, through YQL.
    function queryYQL( creator ) {
      var scriptElem = document.createElement('script');
      scriptElem.src = 'https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20html%20where%20url%3D%22http%3A%2F%2Fwww.patreon.com%2F' + encodeURIComponent( creator ) + '%22%20and%0A%20%20%20%20%20%20xpath%3D\'(%2F%2Fspan%5B%40id%3D%22totalEarnings%22%5D)%5B1%5D%2Ftext()\'&format=json&callback=yqlCallback';
      head.insertBefore( scriptElem, head.firstChild );
    }


    // Callback function, triggered by the script returned by YQL.
    function yqlCallback( obj ) {
      var count = ( obj && obj.query && obj.query.results );

      if ( count ) {
        // Ditch decimals.  Ugly but works due to Patreon using the same
        // locale for all projects.
        count = '$' + count.replace( /\.\d+$/, '' );
      }

      counter.innerHTML = count || 'N/A';
      counter.style.display = 'inline-block';
    }


    // Set variables.
    var params = getParamsFromUrl(),
      creator = params.creator,
      size = params.size,
      head = document.getElementsByTagName('head')[0],
      button = document.getElementById('p-btn'),
      mainButton = document.getElementById('patreon-btn'),
      counter = document.getElementById('p-count');


    // Set `href` for button and counter.
    button.href = counter.href = 'http://patreon.com/' + creator;

    // Change the size if requested.
    if ( size === 'large' ) {
      mainButton.className += ' patreon-btn-large';
    }

    // GO!  Fetch the numbers.
    queryYQL( creator );
  </script>

</body>
</html>
